(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(60),o=n.n(r),c=(n(66),n(2)),i=n(1),l=n(4),u=n(3),m=n(5),p=(n(67),n(68),a.createContext({})),d=p.Consumer,f=p.Provider,b=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.createElement(d,null,function(e){e.open;var t=e.close,n=e.message,s=["SnackBar"];return e.isOpen&&s.push("isOpen"),a.createElement("div",{className:s.join(" "),onClick:t},a.createElement("p",{className:"message"},n))})}}]),t}(a.Component),h=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).open=function(e){n.setState({isOpen:!0,message:e}),setTimeout(function(){n.close()},3e3)},n.close=function(){n.setState({isOpen:!1})},n.state={message:".",isOpen:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.createElement(f,{value:{open:this.open,close:this.close,isOpen:this.state.isOpen,message:this.state.message}},a.createElement(b,null),this.props.children)}}]),t}(a.Component),g=n(6),v=n.n(g),k=n(8),E=n(11),O=n(45),y=n.n(O),j=(n(117),{apiKey:"AIzaSyCsspsFCdr8hvdnyJrkNI2ezRWqqkPfQKs",authDomain:"loptice-9c87b.firebaseapp.com",databaseURL:"https://loptice-9c87b.firebaseio.com",projectId:"loptice-9c87b",storageBucket:"loptice-9c87b.appspot.com",messagingSenderId:"613785681705"}),N=function(){function e(){var t=this;Object(c.a)(this,e),this.db=void 0,this.users=function(){return t.db.ref("users")},this.games=function(){return t.db.ref("games")},this.data=void 0,y.a.initializeApp(j),this.db=y.a.database(),this.db.ref("/").on("value",function(e){null!=e&&(t.data=e.val())})}return Object(i.a)(e,[{key:"addNewUser",value:function(){var e=Object(E.a)(v.a.mark(function e(t){var n,a,s,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.ref("users/").once("value");case 2:n=e.sent,a=n.val()||[],console.log("users"),s={username:t,history:[]},r=[].concat(Object(k.a)(a),[s]),this.db.ref("users/").set(r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveGame",value:function(){var e=Object(E.a)(v.a.mark(function e(t){var n,a,s,r,o,c,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null==(n=localStorage.getItem("username"))&&(n="Unknown"),e.next=4,this.db.ref("games/").once("value");case 4:return a=e.sent,s=a.val()||[],e.next=8,this.db.ref("users/").once("value");case 8:r=e.sent,o=r.val()||[],console.log(o),(c=o.find(function(e){return e.username==n})).history=[].concat(Object(k.a)(c.history||[]),[s.length]),i=[].concat(Object(k.a)(s),[t]),this.db.ref("games/").set(i),this.db.ref("users/").set(o);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),S=(n(120),n(121),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).onClick=function(){null!=n.props.onClick&&n.props.onClick()},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=["Button"];return this.props.isLoading&&e.push("Button-isLoading"),this.props.secondary&&e.push("Button-secondary"),a.createElement("button",{className:e.join(" "),onClick:this.onClick,disabled:this.props.disabled,style:this.props.style},a.createElement("span",{className:"Button-content"},this.props.children),a.createElement("span",{className:"Button-spinner"},a.createElement("img",{src:"./loading.png",alt:""})))}}]),t}(a.Component)),C=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onExistingUserClick=function(){var e=Object(E.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({isListOfUsersVisible:!0});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onNewUserClick=function(){n.setState({isAddNewUserVisible:!0})},n.onUsernameChange=function(e){var t=e.target.value;n.setState({username:t})},n.onAddNewUser=Object(E.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.isAddingNewUserLoading){e.next=2;break}return e.abrupt("return");case 2:return n.setState({isAddingNewUserLoading:!0}),e.next=5,n.props.firebase.addNewUser(n.state.username);case 5:n.setState({isAddingNewUserLoading:!1}),n.props.onDone(n.state.username);case 7:case"end":return e.stop()}},e)})),n.goBackToMainScreen=function(){n.state.isAddingNewUserLoading||n.setState({isAddNewUserVisible:!1,isListOfUsersVisible:!1})},n.onUserPick=function(e){n.setState({chosenUsername:e})},n.onUserAccept=function(){n.props.onDone(n.state.chosenUsername)},n.state={isListOfUsersVisible:!1,isAddNewUserVisible:!1,isListOfUsersLoading:!1,isAddingNewUserLoading:!1,chosenUsername:null,username:"",users:[]},n.props.firebase.users().on("value",function(e){if(null!=e){var t=e.val()||[];n.setState({users:t})}}),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=!this.state.isListOfUsersVisible&&!this.state.isAddNewUserVisible;return a.createElement(d,null,function(n){return a.createElement("div",{className:"page Identification"},t&&a.createElement("div",{className:"subpage Main"},a.createElement("p",null,"Ima\u0161 nalog?"),a.createElement(S,{isLoading:e.state.isListOfUsersLoading,onClick:function(){return e.onExistingUserClick(n)}},"Da, ja sam iskusan kockar"),a.createElement(S,{onClick:e.onNewUserClick},"Ne, ja sam (jo\u0161 uvek) pi\u010dkica")),e.state.isListOfUsersVisible&&a.createElement("div",{className:"subpage ListOfUsers"},a.createElement("p",null,"Na\u0111i se."),e.state.users.map(function(t){var n=t.username,s=["radio"];return n==e.state.chosenUsername&&s.push("selected"),a.createElement("label",{className:s.join(" "),key:n},a.createElement("input",{name:"user",type:"radio",onChange:function(){return e.onUserPick(n)}}),a.createElement("span",null,n))}),a.createElement("div",{className:"buttons"},a.createElement(S,{onClick:e.goBackToMainScreen},"Nazad"),a.createElement(S,{disabled:null==e.state.chosenUsername,isLoading:!1,onClick:e.onUserAccept},"Dalje"))),e.state.isAddNewUserVisible&&a.createElement("div",{className:"subpage AddNewUser"},a.createElement("p",null,"Unesi ime."),a.createElement("input",{type:"text",onChange:e.onUsernameChange,value:e.state.username}),a.createElement("div",{className:"buttons"},a.createElement(S,{onClick:e.goBackToMainScreen},"Nazad"),a.createElement(S,{onClick:e.onAddNewUser,disabled:0==e.state.username.length,isLoading:e.state.isAddingNewUserLoading},"Dalje"))))})}}]),t}(a.Component),w=n(19),U=(n(122),n(123),["red","green","blue","purple","brown","yellow","orange","gray"]),L=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).onClick=function(){null!=n.props.onClick&&n.props.onClick()},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.number%8,t=["Ball",U[e]];return this.props.marked&&t.push("marked"),a.createElement("div",{className:t.join(" "),onClick:this.onClick},this.props.number)}}]),t}(a.Component),A=(n(124),function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onAccept=function(){null!=n.props.onAccept&&n.props.onAccept(n.state.money)},n.onCancel=function(){null!=n.props.onCancel&&n.props.onCancel()},n.setMoney=function(e,t){var a=t.target.valueAsNumber,s=[].concat(Object(k.a)(n.state.money.slice(0,e)),[a],Object(k.a)(n.state.money.slice(e+1)));n.setState({money:s})};var a=e.numbers.length;return n.state={money:Array.from({length:a}).map(function(e){return 0})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return a.createElement("div",{className:"dialog-wrapper"},a.createElement("div",{className:"dialog MoneyInputDialog"},a.createElement("table",null,a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{colSpan:6},"Kombinacija"),a.createElement("td",null,"Out"),a.createElement("td",null,"In")),this.props.numbers.map(function(t,n){var s=!0;return a.createElement("tr",{key:n},t.map(function(t,r){var o=null!=e.props.marked.find(function(e){var t=Object(w.a)(e,2),a=t[0],s=t[1];return a==n&&s==r});o||(s=!1);var c=[];return o&&c.push("marked"),a.createElement("td",{key:r,className:c.join(" ")},t)}),a.createElement("td",null,a.createElement("input",{type:"number",defaultValue:"20"})),a.createElement("td",null,a.createElement("input",{type:"number",defaultValue:s?"":"0",onInput:function(t){return e.setMoney(n,t)}})))}))),a.createElement("div",{className:"buttons"},a.createElement(S,{secondary:!0,onClick:this.onCancel},"Nazad"),a.createElement(S,{isLoading:this.props.isAcceptLoading,onClick:this.onAccept},"Prihvati"))))}}]),t}(a.Component));function M(){for(var e,t,n=[],a=0;a<6;){var s=(e=1,t=48,Math.floor(Math.random()*(t-e+1))+e);n.includes(s)||(n[a++]=s)}return n.sort(function(e,t){return e>t?1:-1})}var x=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).changeCount=function(e){n.setState({count:e,isCountMenuOpen:!1})},n.generateNumbers=function(){for(var e=[],t=0;t<n.state.count;t++)e.push(M());n.setState({numbers:e,marked:[]})},n.openSubmenu=Object(E.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({isSubmenuOpen:!0});case 1:case"end":return e.stop()}},e)})),n.closeSubmenu=function(){n.setState({isSubmenuOpen:!1})},n.toggleCountMenu=function(){n.setState({isCountMenuOpen:!n.state.isCountMenuOpen})},n.acceptMoney=function(){var e=Object(E.a)(v.a.mark(function e(t){var a,s,r,o,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.isAcceptLoading){e.next=2;break}return e.abrupt("return");case 2:for(n.setState({isAcceptLoading:!0}),console.log(t),a=[],s=function(e){var s=t[e],r=n.state.numbers[e].filter(function(t,a){return null!=n.state.marked.find(function(t){var n=Object(w.a)(t,2),s=n[0],r=n[1];return s==e&&r==a})});a[e]={moneyGain:s,moneyLost:20,ticket:n.state.numbers[e],correct:r,date:(new Date).toString()}},r=0;r<t.length;r++)s(r);o=0;case 8:if(!(o<a.length)){e.next=15;break}return c=a[o],e.next=12,n.props.firebase.saveGame(c);case 12:o++,e.next=8;break;case 15:n.setState({isAcceptLoading:!1,isSubmenuOpen:!1});case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.logOut=function(){localStorage.clear(),location.reload()},n.state={username:localStorage.getItem("username"),count:4,numbers:[[3,7,13,21,32,42],[1,2,3,4,5,6],[7,8,9,10,11,12],[13,14,15,16,17,18]],marked:[],isSubmenuOpen:!1,isAcceptLoading:!1,isCountMenuOpen:!1,isNewCombinationsDisabled:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"toggleNumberMark",value:function(e,t){var n=this.state.marked.findIndex(function(n){var a=Object(w.a)(n,2),s=a[0],r=a[1];return s==e&&r==t}),a=this.state.marked;if(-1==n){var s=[e,t],r=[].concat(Object(k.a)(a),[s]);this.setState({marked:r})}else{var o=[].concat(Object(k.a)(a.slice(0,n)),Object(k.a)(a.slice(n+1)));this.setState({marked:o})}}}]),Object(i.a)(t,[{key:"render",value:function(){var e=this;return a.createElement(d,null,function(t){return a.createElement(a.Fragment,null,a.createElement("div",{className:"page Play"},a.createElement("div",{className:"name"},a.createElement("span",null,e.state.username),a.createElement("button",{onClick:e.logOut},"Log out")),a.createElement("div",{className:"balls"},a.createElement("div",{className:"balls-inner"},e.state.numbers.map(function(t,n){return a.createElement("div",{className:"row",key:n},t.map(function(t,s){var r=e.state.marked.findIndex(function(e){var t=Object(w.a)(e,2),a=t[0],r=t[1];return a==n&&r==s})>-1;return a.createElement(L,{onClick:function(){return e.toggleNumberMark(n,s)},number:t,key:t,marked:r})}))}))),a.createElement("div",{className:"again buttons"},a.createElement("div",{style:{flex:5},className:"generate-wrapper"},a.createElement(S,{onClick:e.generateNumbers},"Nove kombinacije")),a.createElement("div",{style:{flex:1},className:"count-wrapper"},a.createElement(S,{onClick:e.toggleCountMenu,secondary:e.state.isCountMenuOpen},e.state.isCountMenuOpen?"\u25bc":e.state.count),a.createElement("div",{className:"submenu",hidden:!e.state.isCountMenuOpen},Array.from({length:6}).map(function(t,n){return a.createElement(S,{key:n+1,secondary:e.state.count!=n+1,onClick:function(){return e.changeCount(n+1)}},n+1)})))),a.createElement("div",{className:"save-closed"},a.createElement(S,{onClick:e.openSubmenu},"Zavr\u0161i kolo")),a.createElement("div",{className:"tabs"},a.createElement("button",{className:"active"},"Igra"),a.createElement("button",{onClick:e.props.onStatsTab},"Statistika"))),e.state.isSubmenuOpen&&a.createElement(A,{numbers:e.state.numbers,marked:e.state.marked,onAccept:e.acceptMoney,onCancel:e.closeSubmenu,isAcceptLoading:e.state.isAcceptLoading}))})}}]),t}(a.Component),I=(n(125),n(126),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return a.createElement("div",{className:"LocalStatRow"},a.createElement("div",{className:"balls"},this.props.ticket.map(function(t){e.props.correct.includes(t);return a.createElement("span",{key:t},t)})),a.createElement("div",{className:"gain"},this.props.moneyGain),a.createElement("div",{className:"loss"},this.props.moneyLost))}}]),t}(a.Component)),T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,n.shouldSetStateAfterMounted=!1,n.users=[],n.games=[],n.state={globalStats:[],localStats:[]},n.props.firebase.users().on("value",function(e){null!=e&&(n.users=e.val()||[],console.log("this.users",n.users),n.compute())}),n.props.firebase.games().on("value",function(e){null!=e&&(n.games=e.val()||[],console.log("this.games",n.games),n.compute())}),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.shouldSetStateAfterMounted&&this.compute()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"compute",value:function(){if(!this._isMounted)return console.log("not mounted"),void(this.shouldSetStateAfterMounted=!0);console.log("computing");var e=this.users,t=this.games,n=localStorage.getItem("username")||"Unknown",a=e.find(function(e){return e.username==n}).history||[],s=t.filter(function(e,t){return a.includes(t)}),r=e.map(function(e){var n=t.filter(function(t,n){return(e.history||[]).includes(n)}),a=0,s=0,r=!0,o=!1,c=void 0;try{for(var i,l=n[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;a+=u.moneyGain,s+=u.moneyLost}}catch(m){o=!0,c=m}finally{try{r||null==l.return||l.return()}finally{if(o)throw c}}return{username:e.username,totalGain:a,totalLoss:s}});this.setState({globalStats:r,localStats:s})}},{key:"render",value:function(){var e=this;return a.createElement(d,null,function(t){return a.createElement(a.Fragment,null,a.createElement("div",{className:"page Stats"},a.createElement("div",{className:"stats-wrapper"},a.createElement("div",{className:"global"},a.createElement("table",null,a.createElement("tbody",null,e.state.globalStats.map(function(e,t){var n=e.totalGain-e.totalLoss,s=["total"];return n>0&&s.push("positive"),n<0&&s.push("negative"),a.createElement("tr",{key:e.username},a.createElement("td",{className:"number"},t+1),a.createElement("td",{className:"username"},e.username),a.createElement("td",{className:"gain"}," +",e.totalGain," "),a.createElement("td",{className:"loss"}," -",e.totalLoss," "),a.createElement("td",{className:s.join(" ")},n))})))),a.createElement("div",{className:"self"},e.state.localStats.map(function(e,t){return a.createElement(I,{key:e.date.toString()+t,ticket:e.ticket||[],correct:e.correct||[],moneyLost:e.moneyLost||0,moneyGain:e.moneyGain||0})}))),a.createElement("div",{className:"tabs"},a.createElement("button",{onClick:e.props.onPlayTab},"Igra"),a.createElement("button",{className:"active"},"Statistika"))))})}}]),t}(a.Component),D=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).firebase=new N,n.onIdDone=function(e){console.log(e),localStorage.setItem("username",e),n.setState({page:"play"})},n.goToPlayTab=function(){n.setState({page:"play"})},n.goToStatsTab=function(){n.setState({page:"stats"})};var a="play";localStorage.getItem("key");return null==localStorage.getItem("username")&&(a="id"),n.state={page:a},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement(h,null,"id"==this.state.page&&s.a.createElement(C,{firebase:this.firebase,onDone:this.onIdDone}),"play"==this.state.page&&s.a.createElement(x,{firebase:this.firebase,onStatsTab:this.goToStatsTab}),"stats"==this.state.page&&s.a.createElement(T,{firebase:this.firebase,onPlayTab:this.goToPlayTab}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},61:function(e,t,n){e.exports=n(127)},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){}},[[61,1,2]]]);
//# sourceMappingURL=main.c20399bb.chunk.js.map